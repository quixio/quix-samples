{
  "libraryItemId": "sql-cdc-source",
  "name": "SQL Server CDC Source",
  "language": "Python",
  "tags": {
    "Pipeline Stage": ["Source"],
    "Type": ["Connectors"],
    "Category": ["SQL DB"]
  },
  "shortDescription": "Stream change data from SQL Server using native Change Data Capture (CDC). Captures INSERT, UPDATE, and DELETE operations in near real-time.",
  "DefaultFile": "main.py",
  "EntryPoint": "dockerfile",
  "RunEntryPoint": "main.py",
  "IconFile": "icon.png",
  "Variables": [
    {
      "Name": "output",
      "Type": "EnvironmentVariable",
      "InputType": "OutputTopic",
      "Description": "The output topic for CDC change events",
      "DefaultValue": "",
      "Required": true
    },
    {
      "Name": "SQL_SERVER",
      "Type": "EnvironmentVariable",
      "InputType": "FreeText",
      "Description": "SQL Server hostname or IP address",
      "DefaultValue": "",
      "Required": true
    },
    {
      "Name": "SQL_DATABASE",
      "Type": "EnvironmentVariable",
      "InputType": "FreeText",
      "Description": "Database name",
      "DefaultValue": "",
      "Required": true
    },
    {
      "Name": "SQL_USERNAME",
      "Type": "EnvironmentVariable",
      "InputType": "FreeText",
      "Description": "SQL Server username",
      "DefaultValue": "",
      "Required": true
    },
    {
      "Name": "SQL_PASSWORD",
      "Type": "EnvironmentVariable",
      "InputType": "Secret",
      "Description": "SQL Server password",
      "DefaultValue": "",
      "Required": true
    },
    {
      "Name": "SQL_SCHEMA",
      "Type": "EnvironmentVariable",
      "InputType": "FreeText",
      "Description": "Schema name (default: dbo)",
      "DefaultValue": "dbo",
      "Required": false
    },
    {
      "Name": "SQL_TABLE",
      "Type": "EnvironmentVariable",
      "InputType": "FreeText",
      "Description": "Table name to capture changes from. CDC must be enabled on this table.",
      "DefaultValue": "",
      "Required": true
    },
    {
      "Name": "SQL_DRIVER",
      "Type": "EnvironmentVariable",
      "InputType": "FreeText",
      "Description": "ODBC driver name",
      "DefaultValue": "{ODBC Driver 18 for SQL Server}",
      "Required": false
    },
    {
      "Name": "POLL_INTERVAL_SECONDS",
      "Type": "EnvironmentVariable",
      "InputType": "FreeText",
      "Description": "How often to check for new CDC changes (in seconds)",
      "DefaultValue": "5",
      "Required": false
    },
    {
      "Name": "LOG_LEVEL",
      "Type": "EnvironmentVariable",
      "InputType": "FreeText",
      "Description": "Logging level (DEBUG, INFO, WARNING, ERROR)",
      "DefaultValue": "INFO",
      "Required": false
    }
  ],
  "DeploySettings": {
    "DeploymentType": "Service",
    "CpuMillicores": 400,
    "MemoryInMb": 500,
    "Replicas": 1,
    "PublicAccess": false,
    "ValidateConnection": true
  }
}
